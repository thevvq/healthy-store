extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
    +alert-success(3000)
    +alert-error(5000)

    if role.permissions.includes('roles_permissions')
        .container.mt-5
            h1 #{pageTitle}

            if records && records.length
                div(data-records=records)
                .text-end
                    button.btn.btn-primary.mb-3(type='submit' btn-submit='') Cập nhật 

                .table-responsive
                    table.table.table-hover.table-sm(table-permissions='')
                        thead
                            tr
                                th Tính năng
                                each item in records
                                    th.text-center #{item.title}
                        tbody
                            tr.d-none(data-name='id')
                                td
                                each item in records
                                    td.text-center
                                        input.form-control(type='text' value=item.id)

                            //- Products 
                            tr
                                td(colspan=4)
                                    b Sản phẩm 

                            tr(data-name='products_view')
                                td Xem
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='products_create')
                                td Thêm mới
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='products_edit')
                                td Chỉnh sửa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='products_delete')
                                td Xóa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            //- Categories 
                            tr
                                td(colspan=4)
                                    b Danh mục sản phẩm 

                            tr(data-name='categories_view')
                                td Xem
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='categories_create')
                                td Thêm mới
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='categories_edit')
                                td Chỉnh sửa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='categories_delete')
                                td Xóa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            //- Roles 
                            tr
                                td(colspan=4)
                                    b Nhóm quyền 

                            tr(data-name='roles_view')
                                td Xem
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='roles_create')
                                td Thêm mới
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='roles_edit')
                                td Chỉnh sửa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='roles_delete')
                                td Xóa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')
                        
                            tr(data-name='roles_permissions')
                                td Phân quyền
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')


                            //- Quản lý tài khoản 
                            tr
                                td(colspan=4)
                                    b Quản lý tài khoản

                            tr(data-name='accounts_view')
                                td Xem
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='accounts_create')
                                td Thêm mới
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='accounts_edit')
                                td Chỉnh sửa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='accounts_delete')
                                td Xóa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')


                            //- Quản lý Blogs 
                            tr
                                td(colspan=4)
                                    b Quản lý Blogs

                            tr(data-name='blogs_view')
                                td Xem
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='blogs_create')
                                td Thêm mới
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='blogs_edit')
                                td Chỉnh sửa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='blogs_delete')
                                td Xóa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')


                            //- Quản lý đơn hàng 
                            tr
                                td(colspan=4)
                                    b Quản lý đơn hàng

                            tr(data-name='orders_view')
                                td Xem
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')

                            tr(data-name='orders_edit')
                                td Chỉnh sửa
                                each item in records
                                    td.text-center
                                        input.form-check-input(type='checkbox')


        form.d-none(
            id='form-change-permissions'
            method='POST'
            action=`${prefixAdmin}/roles/permissions?_method=PATCH`
        )
            .form-group
                input(
                    type='text'
                    class='form-control'
                    name='permissions'
                )

        script(src='/admin/js/role.js')
    else
        +alert-no-permission()