extends ../../layouts/default
include ../../mixins/alert

block main
    +alert-success(3000)
    +alert-error(3000)

    if roleUser.permissions.includes('blogs_edit')
        .container.mt-4
            h2 Sửa bài viết

            form(method="POST", action=`/admin/blog/edit/${blog._id}` enctype="multipart/form-data")
    
                .mb-3
                    label.form-label Tiêu đề
                    input.form-control(type="text", name="title", value=blog.title, required)

                .mb-3(upload-image='')
                    label.form-label(for="thumbnail") Hình ảnh 
                    input.form-control(type="file" id="thumbnail" name="thumbnail" accept="image/*" upload-image-input='')
                    input(type="hidden" name="removeThumbnail" value="0" upload-image-remove-flag='') 
                    .image-preview-wrapper
                        img(src=blog.thumbnail data-old=blog.thumbnail upload-image-preview='')
                        button(
                            type='button' 
                            upload-image-remove='' 
                            aria-label='Close'
                        ) x
                .mb-3
                    label.form-label Nội dung
                    textarea.form-control#editor(name="content", rows="10") !{blog.content}

                button.btn.btn-success(type="submit") Cập nhật
    else
        +alert-no-permission()